<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Analytics | Dev Card Showcase</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="Hall of Fame (1).png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* Additional styles for analytics page */
        .analytics-header {
            text-align: center;
            padding: 4rem 2rem 3rem;
            position: relative;
            overflow: hidden;
        }
        
        .analytics-header h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            color: var(--text-color);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .analytics-header .subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        .header-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        .export-btn, .refresh-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .export-btn:hover, .refresh-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .export-btn.loading, .refresh-btn.loading {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: var(--card-bg);
            margin: 5% auto;
            padding: 0;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: var(--shadow);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            padding: 2rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            margin: 0;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-close {
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--primary-color);
        }
        
        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .export-options {
            margin-bottom: 2rem;
        }
        
        .export-section {
            margin-bottom: 2rem;
        }
        
        .export-section h4 {
            margin-bottom: 1rem;
            color: var(--text-color);
            font-size: 1.1rem;
        }
        
        .format-options {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .format-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            transition: all 0.3s ease;
            background: var(--bg-color);
        }
        
        .format-option:hover {
            border-color: var(--primary-color);
        }
        
        .format-option input[type="radio"] {
            display: none;
        }
        
        .format-option input[type="radio"]:checked + .format-label {
            color: var(--primary-color);
        }
        
        .format-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-color);
            font-weight: 600;
        }
        
        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .filter-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }
        
        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .filter-group label {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .filter-group input {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background: var(--bg-color);
            color: var(--text-color);
            width: 80px;
        }
        
        .export-preview {
            border-top: 1px solid var(--border-color);
            padding-top: 2rem;
        }
        
        .export-preview h4 {
            margin-bottom: 1rem;
        }
        
        .preview-content {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
            color: var(--text-color);
        }
        
        .modal-footer {
            padding: 2rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        .btn-primary, .btn-secondary {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: var(--border-color);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 3rem auto;
            max-width: 1400px;
            padding: 0 2rem;
        }
        
        .stat-card {
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--border-color);
        }
        
        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .stat-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }
        
        .stat-number {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--text-color);
            line-height: 1;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-label {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-trend {
            font-size: 0.95rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: inline-block;
            font-weight: 600;
        }
        
        .trend-up {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.2));
            color: #27ae60;
        }
        
        .trend-down {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.2), rgba(192, 57, 43, 0.2));
            color: #c0392b;
        }
        
        /* Charts Container */
        .charts-container {
            max-width: 1400px;
            margin: 4rem auto;
            padding: 0 2rem;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        @media (max-width: 1024px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-wrapper {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .chart-title {
            font-size: 1.5rem;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chart-title i {
            color: var(--primary-color);
            font-size: 1.8rem;
        }
        
        .chart-controls {
            display: flex;
            gap: 0.5rem;
        }
        
        .chart-control-btn {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .chart-control-btn:hover,
        .chart-control-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Activity Feed */
        .activity-feed {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .activity-feed::-webkit-scrollbar {
            width: 6px;
        }
        
        .activity-feed::-webkit-scrollbar-track {
            background: var(--bg-color);
            border-radius: 10px;
        }
        
        .activity-feed::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .activity-item {
            padding: 1.2rem;
            margin-bottom: 1rem;
            background: var(--bg-stats);
            border-radius: 15px;
            border-left: 4px solid var(--primary-color);
            transition: transform 0.3s ease;
        }
        
        .activity-item:hover {
            transform: translateX(5px);
        }
        
        .activity-user {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.5rem;
        }
        
        .activity-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--primary-color);
        }
        
        .activity-details {
            flex: 1;
        }
        
        .activity-username {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .activity-action {
            color: var(--text-light);
            font-size: 0.95rem;
        }
        
        .activity-time {
            font-size: 0.85rem;
            color: var(--text-light);
            opacity: 0.8;
        }
        
        .activity-stats {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
        }
        
        .stat-badge {
            background: var(--bg-color);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
            border: 1px solid var(--border-color);
        }
        
        .stat-badge i {
            color: var(--primary-color);
        }
        
        /* Contributors Grid */
        .contributors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .contributor-card {
            background: var(--bg-stats);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }
        
        .contributor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            border-color: var(--primary-color);
        }
        
        .contributor-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            border: 3px solid var(--primary-color);
            padding: 3px;
        }
        
        .contributor-name {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }
        
        .contributor-role {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .contributor-stats {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }
        
        .contributor-stat {
            text-align: center;
        }
        
        .contributor-stat-value {
            font-weight: 700;
            color: var(--text-color);
            font-size: 1.2rem;
        }
        
        .contributor-stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        /* Refresh Button */
        .refresh-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 2rem auto;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
        }
        
        .refresh-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108, 99, 255, 0.4);
        }
        
        .refresh-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .refresh-btn i {
            transition: transform 0.5s ease;
        }
        
        .refresh-btn.loading i {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Loading States */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 3rem;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--border-color);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loading-text {
            text-align: center;
            color: var(--text-light);
            font-size: 1.1rem;
            margin-top: 1rem;
        }
        
        /* Time Filter */
        .time-filter {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .time-filter-btn {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 0.7rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .time-filter-btn:hover,
        .time-filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Analytics Info Cards */
        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .info-card {
            background: var(--bg-stats);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 20px rgba(108, 99, 255, 0.4);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            border-color: var(--primary-color);
        }
        
        .info-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1rem;
            color: var(--text-color);
        }
        
        .info-card-header i {
            font-size: 1.5rem;
            color: var(--primary-color);
        }
        
        .info-card-title {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .info-card-content {
            color: var(--text-light);
            line-height: 1.6;
        }
        
        /* Update Time */
        .update-time {
            text-align: center;
            color: var(--text-light);
            font-size: 0.9rem;
            margin-top: 1rem;
            padding: 0.5rem;
            background: var(--bg-color);
            border-radius: 10px;
            display: inline-block;
        }
        
        /* Repository Info */
        .repo-info {
            background: linear-gradient(135deg, rgba(108, 99, 255, 0.1), rgba(76, 201, 240, 0.1));
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem 0;
            border: 1px solid var(--border-color);
        }
        
        .repo-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .repo-info-item {
            text-align: center;
            padding: 1rem;
            background: var(--bg-color);
            border-radius: 10px;
        }
        
        .repo-info-label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 0.5rem;
        }
        
        .repo-info-value {
            font-weight: 700;
            color: var(--text-color);
            font-size: 1.2rem;
        }
        
        /* Error State */
        .error-state {
            text-align: center;
            padding: 3rem;
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1));
            border-radius: 15px;
            margin: 2rem 0;
            border: 1px solid #e74c3c;
        }
        
        .error-state i {
            font-size: 3rem;
            color: #e74c3c;
            margin-bottom: 1rem;
        }
        
        .error-state h3 {
            color: #c0392b;
            margin-bottom: 1rem;
        }
        
        .error-state p {
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }
        
        /* Dark Theme Adjustments */
        body.light-mode .stat-card,
        body.light-mode .chart-wrapper,
        body.light-mode .contributor-card,
        body.light-mode .info-card {
            background: white;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }
        
        body.light-mode .activity-item {
            background: #f8f9ff;
        }
        
        body.light-mode .refresh-btn {
            box-shadow: 0 5px 15px rgba(108, 99, 255, 0.2);
        }
        
        body.light-mode .stat-badge {
            background: #f1f3f9;
        }
    </style>
</head>
<body>
    <div class="circle-container">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const coords = { x: 0, y: 0 };
            const circles = document.querySelectorAll(".circle");

            circles.forEach(function (circle) {
                circle.x = 0;
                circle.y = 0;
            });

            window.addEventListener("mousemove", function (e) {
                coords.x = e.pageX;
                coords.y = e.pageY - window.scrollY;
            });

            function animateCircles() {
                let x = coords.x;
                let y = coords.y;
                circles.forEach(function (circle, index) {
                    circle.style.left = `${x - 12}px`;
                    circle.style.top = `${y - 12}px`;
                    circle.style.transform = `scale(${(circles.length - index) / circles.length})`;
                    const nextCircle = circles[index + 1] || circles[0];
                    circle.x = x;
                    circle.y = y;
                    x += (nextCircle.x - x) * 0.3;
                    y += (nextCircle.y - y) * 0.3;
                });

                requestAnimationFrame(animateCircles);
            }

            animateCircles();
        });
    </script>

    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="nav-logo">
            <i class="fas fa-chart-line"></i> Analytics Dashboard
        </div>

        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <ul class="nav-links" id="navLinks">
            <li><a href="index.html">Home</a></li>
            <li><a href="contribute.html">Contribute</a></li>
            <li><a href="https://github.com/Jayanta2004/dev-card-showcase" target="_blank">GitHub</a></li>
            <li><a href="projects.html">Projects</a></li>
            <li><a href="statistics.html">Statistics</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="guidelines.html">Guidelines</a></li>
            <li><a href="feedback.html">Feedback</a></li>
            <li><a href="bug-report.html">Bug Report</a></li>
            <li><a href="analytics.html">Analytics</a></li>
        </ul>

        <button id="themeToggle" class="theme-toggle">ðŸŒ™</button>
    </nav>

    <!-- ANALYTICS HEADER -->
    <section class="analytics-header">
        <h1><i class="fas fa-chart-pie"></i> Community Analytics</h1>
        <p class="subtitle">Real-time insights into our growing developer community. Track contributions, activity, and engagement metrics.</p>
        
        <div class="time-filter">
            <button class="time-filter-btn active" data-period="all">All Time</button>
            <button class="time-filter-btn" data-period="month">Last Month</button>
            <button class="time-filter-btn" data-period="week">Last Week</button>
            <button class="time-filter-btn" data-period="day">Today</button>
        </div>
        
        <div class="header-actions">
            <button id="exportBtn" class="export-btn">
                <i class="fas fa-download"></i> Export Data
            </button>
            <button id="refreshBtn" class="refresh-btn">
                <i class="fas fa-sync-alt"></i> Refresh Analytics
            </button>
        </div>
        
        <div class="update-time" id="lastUpdated">
            Last updated: Loading...
        </div>
    </section>

    <!-- STATS OVERVIEW -->
    <div class="stats-grid" id="statsContainer">
        <!-- Stats will be loaded here -->
        <div class="stat-card">
            <div class="loading">
                <div class="loading-spinner"></div>
                <div class="loading-text">Loading statistics...</div>
            </div>
        </div>
    </div>

    <!-- CHARTS & DATA -->
    <div class="charts-container">
        <div class="charts-grid">
            <!-- Left Column -->
            <div>
                <!-- Contributors Chart -->
                <div class="chart-wrapper">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i class="fas fa-users-line"></i> Contributors Growth
                        </h3>
                        <div class="chart-controls">
                            <button class="chart-control-btn active" data-chart-type="line">Line</button>
                            <button class="chart-control-btn" data-chart-type="bar">Bar</button>
                        </div>
                    </div>
                    <canvas id="contributorsChart"></canvas>
                </div>

                <!-- Activity Feed -->
                <div class="chart-wrapper">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i class="fas fa-history"></i> Recent Activity
                        </h3>
                    </div>
                    <div class="activity-feed" id="activityList">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Loading recent activity...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div>
                <!-- Top Contributors -->
                <div class="chart-wrapper">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i class="fas fa-crown"></i> Top Contributors
                        </h3>
                    </div>
                    <div id="topContributors">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Loading top contributors...</div>
                        </div>
                    </div>
                </div>

                <!-- Repository Info -->
                <div class="repo-info">
                    <h3 class="chart-title">
                        <i class="fas fa-info-circle"></i> Repository Information
                    </h3>
                    <div id="repoInfo">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Loading repository info...</div>
                        </div>
                    </div>
                </div>

                <!-- Language Breakdown -->
                <div class="chart-wrapper">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i class="fas fa-code"></i> Languages Used
                        </h3>
                    </div>
                    <canvas id="languagesChart"></canvas>
                </div>
            </div>
        </div>

        <!-- All Contributors -->
        <div class="chart-wrapper">
            <div class="chart-header">
                <h3 class="chart-title">
                    <i class="fas fa-users"></i> All Contributors
                </h3>
            </div>
            <div class="contributors-grid" id="allContributors">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">Loading all contributors...</div>
                </div>
            </div>
        </div>

        <!-- Additional Info Cards -->
        <div class="info-cards">
            <div class="info-card">
                <div class="info-card-header">
                    <i class="fas fa-bolt"></i>
                    <h4 class="info-card-title">Real-time Updates</h4>
                </div>
                <p class="info-card-content">
                    Data is fetched directly from GitHub API. The dashboard updates every 5 minutes automatically.
                </p>
            </div>
            
            <div class="info-card">
                <div class="info-card-header">
                    <i class="fas fa-chart-bar"></i>
                    <h4 class="info-card-title">Analytics Metrics</h4>
                </div>
                <p class="info-card-content">
                    Track contributions, commits, repository stats, and community growth over time.
                </p>
            </div>
            
            <div class="info-card">
                <div class="info-card-header">
                    <i class="fas fa-github"></i>
                    <h4 class="info-card-title">GitHub Integration</h4>
                </div>
                <p class="info-card-content">
                    Direct links to GitHub profiles and repositories. Click on any contributor to view their profile.
                </p>
            </div>
        </div>
    </div>

    <!--Back to Top button-->
    <button class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-container">
      
          <!-- Brand Section -->
          <div class="footer-brand">
            <h3>
              <i class="fa-solid fa-file-lines"></i>
              Dev-Card-Showcase
            </h3>
            <p>Contribute with Projects & Add Your Contribution Card</p>
      
            <div class="footer-social-icons">
              <a href="https://github.com/Jayanta2004"><i class="fa-brands fa-github"></i></a>
              <a href="https://x.com/JayantaG2004"><i class="fa-brands fa-twitter"></i></a>
              <a href="https://www.instagram.com/jayantaghosh2004"><i class="fa-brands fa-instagram"></i></a>
              <a href="https://www.linkedin.com/in/jayantaghosh2004"><i class="fa-brands fa-linkedin-in"></i></a>
            </div>
          </div>
      
          <!-- Quick Links -->
          <div class="footer-links">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="projects.html">Projects</a></li>
              <li><a href="about.html">About</a></li>
              <li><a href="feedback.html">Feedback</a></li>
            </ul>
          </div>
      
          <!-- Resources -->
          <div class="footer-links">
            <h4>Resources</h4>
            <ul>
              <li><a href="#">Analytics</a></li>
              <li><a href="guidelines.html">Guidelines</a></li>
              <li><a href="bug-report.html">Bug Report</a></li>
              <li><a href="faq.html">FAQ</a></li>
            </ul>
          </div>
      
          <!-- Legal -->
          <div class="footer-links">
            <h4>Legal</h4>
            <ul>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms of Service</a></li>
              <li><a href="#">Cookie Policy</a></li>
            </ul>
          </div>
        </div>
      
        <div class="footer-bottom">
          <p>Â© 2026 Dev-Card-Showcase. All rights reserved.</p>
        </div>
      </footer>

    <!-- EXPORT MODAL -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-download"></i> Export Contributor Data</h3>
                <span class="modal-close" id="exportModalClose">&times;</span>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <div class="export-section">
                        <h4>Export Format</h4>
                        <div class="format-options">
                            <label class="format-option">
                                <input type="radio" name="exportFormat" value="json" checked>
                                <span class="format-label">
                                    <i class="fas fa-code"></i>
                                    JSON
                                </span>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="exportFormat" value="csv">
                                <span class="format-label">
                                    <i class="fas fa-table"></i>
                                    CSV
                                </span>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="exportFormat" value="pdf">
                                <span class="format-label">
                                    <i class="fas fa-file-pdf"></i>
                                    PDF
                                </span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="export-section">
                        <h4>Filter Options</h4>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="checkbox" id="filterRole" checked>
                                <span>Include all contributors</span>
                            </label>
                            <div class="filter-group">
                                <label for="minContributions">Minimum contributions:</label>
                                <input type="number" id="minContributions" min="1" value="1">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="export-preview">
                    <h4>Data Preview</h4>
                    <div id="exportPreview" class="preview-content">
                        Loading preview...
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="exportCancel" class="btn-secondary">Cancel</button>
                <button id="exportConfirm" class="btn-primary">
                    <i class="fas fa-download"></i> Export Data
                </button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // Configuration
        const GITHUB_API = 'https://api.github.com';
        const REPO_OWNER = 'jayanta2004';
        const REPO_NAME = 'dev-card-showcase';
        const GITHUB_TOKEN = ''; // Add your token here if needed

        // State
        let contributorsData = [];
        let commitsData = [];
        let repoData = {};
        let charts = {};

        // DOM Elements
        const statsContainer = document.getElementById('statsContainer');
        const activityList = document.getElementById('activityList');
        const topContributors = document.getElementById('topContributors');
        const allContributors = document.getElementById('allContributors');
        const repoInfo = document.getElementById('repoInfo');
        const refreshBtn = document.getElementById('refreshBtn');
        const lastUpdated = document.getElementById('lastUpdated');
        const themeToggle = document.getElementById('themeToggle');
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');
        const scrollToTopBtn = document.getElementById('scrollToTop');
        
        // Export Modal Elements
        const exportBtn = document.getElementById('exportBtn');
        const exportModal = document.getElementById('exportModal');
        const exportModalClose = document.getElementById('exportModalClose');
        const exportCancel = document.getElementById('exportCancel');
        const exportConfirm = document.getElementById('exportConfirm');
        const exportPreview = document.getElementById('exportPreview');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize theme
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.body.setAttribute('data-theme', savedTheme);
            themeToggle.textContent = savedTheme === 'light' ? 'â˜€ï¸' : 'ðŸŒ™';

            // Load data
            loadAllData();

            // Set up auto-refresh
            setInterval(() => {
                if (!document.hidden) {
                    loadAllData();
                }
            }, 300000); // 5 minutes
        });

        // Navbar Toggle
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // Theme Toggle
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.body.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', newTheme);
            themeToggle.textContent = newTheme === 'light' ? 'â˜€ï¸' : 'ðŸŒ™';
            localStorage.setItem('theme', newTheme);
            
            // Update charts for theme change
            updateChartsTheme();
        });

        // Scroll to Top
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.add('show');
            } else {
                scrollToTopBtn.classList.remove('show');
            }
        });

        // Time Filter
        document.querySelectorAll('.time-filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.time-filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                // In a real app, you would filter data based on the selected period
            });
        });

        // Chart Controls
        document.querySelectorAll('.chart-control-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const chartType = this.dataset.chartType;
                const chartWrapper = this.closest('.chart-wrapper');
                const chartId = chartWrapper.querySelector('canvas')?.id;
                
                document.querySelectorAll('.chart-control-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                if (chartId && charts[chartId]) {
                    charts[chartId].config.type = chartType;
                    charts[chartId].update();
                }
            });
        });

        // GitHub API Headers
        function getHeaders() {
            const headers = {
                'Accept': 'application/vnd.github.v3+json'
            };
            if (GITHUB_TOKEN) {
                headers['Authorization'] = `token ${GITHUB_TOKEN}`;
            }
            return headers;
        }

        // Fetch Repository Data
        async function fetchRepoData() {
            try {
                const response = await fetch(
                    `${GITHUB_API}/repos/${REPO_OWNER}/${REPO_NAME}`,
                    { headers: getHeaders() }
                );
                
                if (!response.ok) throw new Error(`GitHub API Error: ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('Error fetching repo data:', error);
                throw error;
            }
        }

        // Fetch Contributors
        async function fetchContributors() {
            try {
                const response = await fetch(
                    `${GITHUB_API}/repos/${REPO_OWNER}/${REPO_NAME}/contributors`,
                    { headers: getHeaders() }
                );
                
                if (!response.ok) throw new Error(`GitHub API Error: ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('Error fetching contributors:', error);
                throw error;
            }
        }

        // Fetch Commits
        async function fetchCommits() {
            try {
                const response = await fetch(
                    `${GITHUB_API}/repos/${REPO_OWNER}/${REPO_NAME}/commits?per_page=20`,
                    { headers: getHeaders() }
                );
                
                if (!response.ok) throw new Error(`GitHub API Error: ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('Error fetching commits:', error);
                throw error;
            }
        }

        // Fetch Languages
        async function fetchLanguages() {
            try {
                const response = await fetch(
                    `${GITHUB_API}/repos/${REPO_OWNER}/${REPO_NAME}/languages`,
                    { headers: getHeaders() }
                );
                
                if (!response.ok) throw new Error(`GitHub API Error: ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('Error fetching languages:', error);
                throw error;
            }
        }

        // Update Stats Cards
        function updateStats(repo, contributors, commits) {
            const totalContributors = contributors.length;
            const totalCommits = commits.length;
            const stars = repo.stargazers_count || 0;
            const forks = repo.forks_count || 0;
            const openIssues = repo.open_issues_count || 0;
            const watchers = repo.watchers_count || 0;
            const sizeMB = (repo.size / 1024).toFixed(1);

            // Calculate recent activity
            const lastMonthCommits = commits.filter(c => {
                const date = new Date(c.commit.author.date);
                const monthAgo = new Date();
                monthAgo.setMonth(monthAgo.getMonth() - 1);
                return date > monthAgo;
            }).length;

            const lastWeekCommits = commits.filter(c => {
                const date = new Date(c.commit.author.date);
                const weekAgo = new Date();
                weekAgo.setDate(weekAgo.getDate() - 7);
                return date > weekAgo;
            }).length;

            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-number">${totalContributors}</div>
                    <div class="stat-label">Total Contributors</div>
                    <div class="stat-trend trend-up">+${lastWeekCommits} commits this week</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-code-branch"></i>
                    </div>
                    <div class="stat-number">${totalCommits}</div>
                    <div class="stat-label">Total Commits</div>
                    <div class="stat-trend trend-up">Active development</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-number">${stars}</div>
                    <div class="stat-label">GitHub Stars</div>
                    <div class="stat-trend ${stars > 0 ? 'trend-up' : 'trend-down'}">
                        ${stars > 0 ? 'Starred by developers' : 'Be the first to star!'}
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-share-alt"></i>
                    </div>
                    <div class="stat-number">${forks}</div>
                    <div class="stat-label">Repository Forks</div>
                    <div class="stat-trend ${forks > 0 ? 'trend-up' : 'trend-down'}">
                        ${forks > 0 ? 'Project being forked' : 'No forks yet'}
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="stat-number">${openIssues}</div>
                    <div class="stat-label">Open Issues</div>
                    <div class="stat-trend ${openIssues === 0 ? 'trend-up' : 'trend-down'}">
                        ${openIssues === 0 ? 'All issues resolved' : 'Needs attention'}
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <div class="stat-number">${sizeMB} MB</div>
                    <div class="stat-label">Repository Size</div>
                    <div class="stat-trend trend-up">${lastMonthCommits} commits this month</div>
                </div>
            `;
        }

        // Update Recent Activity
        function updateActivity(commits) {
            if (!commits || commits.length === 0) {
                activityList.innerHTML = '<div class="activity-item">No recent activity found</div>';
                return;
            }

            let html = '';
            commits.slice(0, 8).forEach(commit => {
                const author = commit.commit.author.name;
                const username = commit.author?.login || author;
                const avatar = commit.author?.avatar_url || 'https://avatars.githubusercontent.com/u/583231?v=4';
                const message = commit.commit.message;
                const date = new Date(commit.commit.author.date);
                const timeAgo = getTimeAgo(date);
                const commitUrl = commit.html_url;

                html += `
                    <div class="activity-item">
                        <div class="activity-user">
                            <img src="${avatar}" alt="${username}" class="activity-avatar">
                            <div class="activity-details">
                                <div class="activity-username">${username}</div>
                                <div class="activity-action">${message.length > 50 ? message.substring(0, 50) + '...' : message}</div>
                                <div class="activity-time">${timeAgo}</div>
                            </div>
                        </div>
                        <div class="activity-stats">
                            <a href="${commitUrl}" target="_blank" class="stat-badge">
                                <i class="fas fa-external-link-alt"></i> View Commit
                            </a>
                        </div>
                    </div>
                `;
            });

            activityList.innerHTML = html;
        }

        // Update Top Contributors
        function updateTopContributors(contributors) {
            if (!contributors || contributors.length === 0) {
                topContributors.innerHTML = '<div class="activity-item">No contributors found</div>';
                return;
            }

            let html = '';
            contributors.slice(0, 5).forEach((contributor, index) => {
                const contributions = contributor.contributions;
                const avatar = contributor.avatar_url;
                const username = contributor.login;
                const profileUrl = contributor.html_url;

                html += `
                    <div class="activity-item">
                        <div class="activity-user">
                            <div style="font-weight: bold; font-size: 1.2rem; color: var(--primary-color); min-width: 30px;">#${index + 1}</div>
                            <img src="${avatar}" alt="${username}" class="activity-avatar">
                            <div class="activity-details">
                                <div class="activity-username">${username}</div>
                                <div class="activity-action">${contributions} contributions</div>
                            </div>
                        </div>
                        <div class="activity-stats">
                            <a href="${profileUrl}" target="_blank" class="stat-badge">
                                <i class="fab fa-github"></i> Profile
                            </a>
                        </div>
                    </div>
                `;
            });

            topContributors.innerHTML = html;
        }

        // Update All Contributors
        function updateAllContributors(contributors) {
            if (!contributors || contributors.length === 0) {
                allContributors.innerHTML = '<div class="contributor-card">No contributors found</div>';
                return;
            }

            let html = '';
            contributors.forEach(contributor => {
                const avatar = contributor.avatar_url;
                const username = contributor.login;
                const contributions = contributor.contributions;
                const profileUrl = contributor.html_url;

                html += `
                    <a href="${profileUrl}" target="_blank" class="contributor-card" style="text-decoration: none; color: inherit;">
                        <img src="${avatar}" alt="${username}" class="contributor-avatar">
                        <div class="contributor-name">${username}</div>
                        <div class="contributor-role">Open Source Contributor</div>
                        <div class="contributor-stats">
                            <div class="contributor-stat">
                                <div class="contributor-stat-value">${contributions}</div>
                                <div class="contributor-stat-label">Contributions</div>
                            </div>
                        </div>
                    </a>
                `;
            });

            allContributors.innerHTML = html;
        }

        // Update Repository Info
        function updateRepoInfo(repo) {
            const created = new Date(repo.created_at).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            const updated = new Date(repo.updated_at).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            const sizeMB = (repo.size / 1024).toFixed(1);
            const isPrivate = repo.private ? 'Private' : 'Public';

            repoInfo.innerHTML = `
                <div class="repo-info-grid">
                    <div class="repo-info-item">
                        <div class="repo-info-label">Visibility</div>
                        <div class="repo-info-value">${isPrivate}</div>
                    </div>
                    <div class="repo-info-item">
                        <div class="repo-info-label">Created</div>
                        <div class="repo-info-value">${created}</div>
                    </div>
                    <div class="repo-info-item">
                        <div class="repo-info-label">Last Updated</div>
                        <div class="repo-info-value">${updated}</div>
                    </div>
                    <div class="repo-info-item">
                        <div class="repo-info-label">Size</div>
                        <div class="repo-info-value">${sizeMB} MB</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 1.5rem;">
                    <a href="${repo.html_url}" target="_blank" class="refresh-btn" style="display: inline-flex; text-decoration: none; font-size: 1rem; padding: 0.8rem 1.5rem;">
                        <i class="fab fa-github"></i> View Repository on GitHub
                    </a>
                </div>
            `;
        }

        // Update Charts
        function updateCharts(contributors, languages) {
            const isLightMode = document.body.classList.contains('light-mode');
            const gridColor = isLightMode ? 'rgba(0, 0, 0, 0.05)' : 'rgba(255, 255, 255, 0.05)';
            const textColor = isLightMode ? '#333' : '#e2e8f0';
            const textLightColor = isLightMode ? '#666' : '#a0aec0';

            // Contributors Growth Chart
            const contributorsCtx = document.getElementById('contributorsChart').getContext('2d');
            
            // Simulate growth data (in production, fetch actual historical data)
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const growthData = [];
            let cumulative = 0;
            
            for (let i = 0; i < 12; i++) {
                cumulative += Math.floor(Math.random() * 5) + (i < 6 ? 1 : 2);
                if (i === 11) cumulative = contributors.length;
                growthData.push(cumulative);
            }

            if (charts.contributorsChart) {
                charts.contributorsChart.destroy();
            }

            charts.contributorsChart = new Chart(contributorsCtx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Contributors',
                        data: growthData,
                        borderColor: 'rgb(108, 99, 255)',
                        backgroundColor: 'rgba(108, 99, 255, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: 'rgb(108, 99, 255)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: textColor,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: isLightMode ? 'white' : '#2d3748',
                            titleColor: textColor,
                            bodyColor: textColor,
                            borderColor: 'rgb(108, 99, 255)',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: gridColor
                            },
                            ticks: {
                                color: textLightColor,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: gridColor
                            },
                            ticks: {
                                color: textLightColor,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });

            // Languages Chart
            const languagesCtx = document.getElementById('languagesChart').getContext('2d');
            const languageNames = Object.keys(languages);
            const languageValues = Object.values(languages);
            
            const total = languageValues.reduce((a, b) => a + b, 0);
            const percentages = languageValues.map(value => Math.round((value / total) * 100));

            // Color palette for languages
            const languageColors = [
                '#667eea', '#764ba2', '#f093fb', '#f5576c', 
                '#4facfe', '#00cdac', '#81ecec', '#a29bfe',
                '#fd79a8', '#e17055', '#0984e3', '#00b894'
            ];

            if (charts.languagesChart) {
                charts.languagesChart.destroy();
            }

            charts.languagesChart = new Chart(languagesCtx, {
                type: 'doughnut',
                data: {
                    labels: languageNames,
                    datasets: [{
                        data: percentages,
                        backgroundColor: languageNames.map((_, i) => languageColors[i % languageColors.length]),
                        borderWidth: 1,
                        borderColor: isLightMode ? '#fff' : '#2d3748'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: textColor,
                                font: {
                                    size: 12
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed}%`;
                                }
                            },
                            backgroundColor: isLightMode ? 'white' : '#2d3748',
                            titleColor: textColor,
                            bodyColor: textColor
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        // Update charts theme
        function updateChartsTheme() {
            if (charts.contributorsChart || charts.languagesChart) {
                updateCharts(contributorsData, {});
            }
        }

        // Time Ago Utility
        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            
            let interval = seconds / 31536000;
            if (interval > 1) return Math.floor(interval) + ' years ago';
            
            interval = seconds / 2592000;
            if (interval > 1) return Math.floor(interval) + ' months ago';
            
            interval = seconds / 86400;
            if (interval > 1) return Math.floor(interval) + ' days ago';
            
            interval = seconds / 3600;
            if (interval > 1) return Math.floor(interval) + ' hours ago';
            
            interval = seconds / 60;
            if (interval > 1) return Math.floor(interval) + ' minutes ago';
            
            return Math.floor(seconds) + ' seconds ago';
        }

        // Export Modal Functions
        function openExportModal() {
            exportModal.style.display = 'block';
            updateExportPreview();
        }
        
        function closeExportModal() {
            exportModal.style.display = 'none';
        }
        
        function updateExportPreview() {
            if (!contributorsData.length) {
                exportPreview.textContent = 'No data available';
                return;
            }
            
            const format = document.querySelector('input[name="exportFormat"]:checked').value;
            const minContributions = parseInt(document.getElementById('minContributions').value) || 1;
            
            // Filter data
            const filteredData = contributorsData.filter(c => c.contributions >= minContributions);
            
            // Prepare sample data
            const sampleData = filteredData.slice(0, 3).map(c => ({
                name: c.login,
                role: 'Contributor',
                githubUrl: c.html_url,
                contributions: c.contributions
            }));
            
            if (format === 'json') {
                exportPreview.textContent = JSON.stringify(sampleData, null, 2);
            } else if (format === 'csv') {
                const headers = ['Name', 'Role', 'GitHub URL', 'Contributions'];
                const rows = sampleData.map(item => [item.name, item.role, item.githubUrl, item.contributions]);
                const csv = [headers, ...rows].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
                exportPreview.textContent = csv;
            } else if (format === 'pdf') {
                exportPreview.textContent = 'PDF preview not available. Will include contributor table with formatted data.';
            }
        }
        
        function handleExport() {
            if (!contributorsData.length) {
                alert('No data available to export');
                return;
            }
            
            const format = document.querySelector('input[name="exportFormat"]:checked').value;
            const minContributions = parseInt(document.getElementById('minContributions').value) || 1;
            
            // Filter data
            const filteredData = contributorsData.filter(c => c.contributions >= minContributions);
            
            // Prepare export data
            const exportData = filteredData.map(c => ({
                name: c.login,
                role: 'Contributor',
                githubUrl: c.html_url,
                contributions: c.contributions,
                avatarUrl: c.avatar_url
            }));
            
            const timestamp = new Date().toISOString().split('T')[0];
            const filename = `contributors-${timestamp}`;
            
            if (format === 'json') {
                exportJSON(exportData, filename);
            } else if (format === 'csv') {
                exportCSV(exportData, filename);
            } else if (format === 'pdf') {
                exportPDF(exportData, filename);
            }
            
            closeExportModal();
        }
        
        function exportJSON(data, filename) {
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            downloadBlob(blob, `${filename}.json`);
        }
        
        function exportCSV(data, filename) {
            const headers = ['Name', 'Role', 'GitHub URL', 'Contributions', 'Avatar URL'];
            const rows = data.map(item => [
                item.name,
                item.role,
                item.githubUrl,
                item.contributions,
                item.avatarUrl
            ]);
            
            const csvContent = [headers, ...rows]
                .map(row => row.map(cell => `"${cell}"`).join(','))
                .join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            downloadBlob(blob, `${filename}.csv`);
        }
        
        function exportPDF(data, filename) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Title
            doc.setFontSize(20);
            doc.text('Contributor Report', 20, 30);
            
            // Date
            doc.setFontSize(12);
            doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 20, 45);
            
            // Table headers
            doc.setFontSize(14);
            doc.text('Contributors:', 20, 65);
            
            let y = 80;
            doc.setFontSize(10);
            
            data.forEach((contributor, index) => {
                if (y > 270) { // New page if needed
                    doc.addPage();
                    y = 30;
                }
                
                doc.text(`${index + 1}. ${contributor.name}`, 20, y);
                doc.text(`Role: ${contributor.role}`, 20, y + 5);
                doc.text(`Contributions: ${contributor.contributions}`, 20, y + 10);
                doc.text(`GitHub: ${contributor.githubUrl}`, 20, y + 15);
                
                y += 25;
            });
            
            doc.save(`${filename}.pdf`);
        }
        
        function downloadBlob(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Load All Data
        async function loadAllData() {
            try {
                refreshBtn.disabled = true;
                refreshBtn.classList.add('loading');
                refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Loading...';
                
                // Fetch all data in parallel
                const [repo, contributors, commits, languages] = await Promise.all([
                    fetchRepoData(),
                    fetchContributors(),
                    fetchCommits(),
                    fetchLanguages()
                ]);
                
                // Store data
                repoData = repo;
                contributorsData = contributors;
                commitsData = commits;
                
                // Update UI
                updateStats(repo, contributors, commits);
                updateActivity(commits);
                updateTopContributors(contributors);
                updateAllContributors(contributors);
                updateRepoInfo(repo);
                updateCharts(contributors, languages);
                
                // Update timestamp
                lastUpdated.textContent = `Last updated: ${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
                
            } catch (error) {
                console.error('Error loading data:', error);
                statsContainer.innerHTML = `
                    <div class="error-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Error Loading Data</h3>
                        <p>${error.message || 'Unable to fetch data from GitHub API'}</p>
                        <p><small>Please check if the repository exists and is public. GitHub API has rate limits.</small></p>
                        <button onclick="loadAllData()" class="refresh-btn">
                            <i class="fas fa-redo"></i> Try Again
                        </button>
                    </div>
                `;
            } finally {
                refreshBtn.disabled = false;
                refreshBtn.classList.remove('loading');
                refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Analytics';
            }
        }

        // Refresh button event
        refreshBtn.addEventListener('click', loadAllData);
        
        // Export Modal Events
        exportBtn.addEventListener('click', openExportModal);
        exportModalClose.addEventListener('click', closeExportModal);
        exportCancel.addEventListener('click', closeExportModal);
        exportConfirm.addEventListener('click', handleExport);
        
        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === exportModal) {
                closeExportModal();
            }
        });
        
        // Update preview when filters change
        document.querySelectorAll('input[name="exportFormat"]').forEach(radio => {
            radio.addEventListener('change', updateExportPreview);
        });
        document.getElementById('filterRole').addEventListener('change', updateExportPreview);
        document.getElementById('minContributions').addEventListener('input', updateExportPreview);
    </script>
</body>
</html>
