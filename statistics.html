<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contributor Statistics | Dev Card Showcase</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="Hall of Fame (1).png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* Statistics Page Styles */
        .stats-header {
            text-align: center;
            padding: 4rem 2rem 3rem;
            position: relative;
            overflow: hidden;
        }

        .stats-header h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stats-header .subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 2rem;
        }

        /* Controls Section */
        .stats-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin: 2rem auto;
            max-width: 1200px;
            padding: 0 2rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-group label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .control-group select,
        .control-group input {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin: 3rem auto;
            max-width: 1400px;
            padding: 0 2rem;
        }

        .chart-card {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .chart-card h3 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 1rem;
        }

        /* Summary Cards */
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem auto;
            max-width: 1200px;
            padding: 0 2rem;
        }

        .summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary-color);
        }

        .summary-card .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .summary-card .value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .summary-card .label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Export Button */
        .export-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 2rem auto;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(56, 189, 248, 0.3);
        }

        /* Data Export Section */
        .data-export-section {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 1000px;
            text-align: center;
            box-shadow: var(--shadow-md);
            backdrop-filter: blur(10px);
        }

        .data-export-section h2 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }

        .export-description {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 0.9rem;
        }

        .export-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .export-buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .export-status {
            font-size: 0.9rem;
            color: var(--text-secondary);
            min-height: 1.2rem;
        }

        .export-status.success {
            color: #10b981;
        }

        .export-status.error {
            color: #ef4444;
        }

        .export-status.loading {
            color: var(--primary-color);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .stats-header h1 {
                font-size: 2.5rem;
            }

            .stats-controls {
                flex-direction: column;
                gap: 1rem;
            }

            .charts-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .summary-cards {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
            }

            .chart-card {
                padding: 1.5rem;
            }

            .chart-container {
                height: 250px;
            }
        }

        @media (max-width: 480px) {
            .stats-header {
                padding: 3rem 1rem 2rem;
            }

            .stats-header h1 {
                font-size: 2rem;
            }

            .stats-controls {
                padding: 0 1rem;
            }

            .charts-grid,
            .summary-cards {
                padding: 0 1rem;
            }

            .summary-card {
                padding: 1rem;
            }

            .summary-card .value {
                font-size: 1.5rem;
            }

            .export-btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .data-export-section {
                padding: 1.5rem;
                margin: 1rem;
            }

            .export-controls {
                flex-direction: column;
                gap: 1rem;
            }

            .export-description {
                font-size: 0.8rem;
            }
        }

        /* Loading State */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 300px;
            color: var(--text-secondary);
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .stats-controls {
                flex-direction: column;
                align-items: center;
            }

            .stats-header h1 {
                font-size: 2.5rem;
            }
        }
    </style>
</head>

<body>
    <!-- Animated Background -->
    <div class="circle-container">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-logo">üöÄ Community</div>

        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <ul class="nav-links" id="navLinks">
            <li><a href="index.html">Home</a></li>
            <li><a href="contribute.html">Contribute</a></li>
            <li><a href="https://github.com/Jayanta2004" target="_blank">GitHub</a></li>
            <li><a href="projects.html">Projects</a></li>
            <li><a href="statistics.html">Statistics</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="guidelines.html">Guidelines</a></li>
            <li><a href="feedback.html">Feedback</a></li>
            <li><a href="analytics.html">Analytics</a></li>
        </ul>

        <button id="themeToggle" class="theme-toggle">üåô</button>
    </nav>

    <!-- Header -->
    <header class="stats-header">
        <h1>üìä Contributor Statistics</h1>
        <p class="subtitle">
            Comprehensive analytics and insights about our growing community of developers and contributors
        </p>
    </header>

    <!-- Controls -->
    <section class="stats-controls">
        <div class="control-group">
            <label for="timeRange">Time Range</label>
            <select id="timeRange">
                <option value="all">All Time</option>
                <option value="year">Last Year</option>
                <option value="month">Last Month</option>
                <option value="week">Last Week</option>
            </select>
        </div>

        <div class="control-group">
            <label for="chartType">Chart Type</label>
            <select id="chartType">
                <option value="bar">Bar Chart</option>
                <option value="line">Line Chart</option>
                <option value="doughnut">Doughnut Chart</option>
                <option value="radar">Radar Chart</option>
            </select>
        </div>

        <div class="control-group">
            <label for="roleFilter">Filter by Role</label>
            <select id="roleFilter">
                <option value="all">All Roles</option>
                <option value="developer">Developers</option>
                <option value="contributor">Contributors</option>
                <option value="maintainer">Maintainers</option>
            </select>
        </div>
    </section>

    <!-- Summary Cards -->
    <section class="summary-cards">
        <div class="summary-card">
            <div class="icon">üë•</div>
            <div class="value" id="totalContributors">0</div>
            <div class="label">Total Contributors</div>
        </div>

        <div class="summary-card">
            <div class="icon">üíª</div>
            <div class="value" id="totalDevelopers">0</div>
            <div class="label">Developers</div>
        </div>

        <div class="summary-card">
            <div class="icon">ü§ù</div>
            <div class="value" id="totalContributorsOnly">0</div>
            <div class="label">Contributors</div>
        </div>

        <div class="summary-card">
            <div class="icon">üëë</div>
            <div class="value" id="totalMaintainers">0</div>
            <div class="label">Maintainers</div>
        </div>
    </section>

    <!-- Charts Grid -->
    <section class="charts-grid">
        <div class="chart-card">
            <h3><i class="fas fa-chart-pie"></i> Role Distribution</h3>
            <div class="chart-container">
                <canvas id="roleChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <h3><i class="fas fa-chart-line"></i> Growth Timeline</h3>
            <div class="chart-container">
                <canvas id="growthChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <h3><i class="fas fa-chart-bar"></i> Monthly Activity</h3>
            <div class="chart-container">
                <canvas id="activityChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <h3><i class="fas fa-globe"></i> Geographic Distribution</h3>
            <div class="chart-container">
                <canvas id="geographicChart"></canvas>
            </div>
        </div>
    </section>

    <!-- Data Export Section -->
    <section class="data-export-section">
        <h2><i class="fas fa-file-export"></i> Export Contributor Data</h2>
        <p class="export-description">Download contributor information in various formats for analysis and reporting</p>

        <div class="export-controls">
            <div class="control-group">
                <label for="exportFormat">Export Format</label>
                <select id="exportFormat">
                    <option value="json">JSON</option>
                    <option value="csv">CSV</option>
                    <option value="pdf">PDF (Coming Soon)</option>
                </select>
            </div>

            <div class="control-group">
                <label for="exportRoleFilter">Filter by Role</label>
                <select id="exportRoleFilter">
                    <option value="all">All Roles</option>
                    <option value="developer">Developers</option>
                    <option value="contributor">Contributors</option>
                    <option value="maintainer">Maintainers</option>
                </select>
            </div>

            <div class="control-group">
                <label for="exportLimit">Limit Results</label>
                <select id="exportLimit">
                    <option value="all">All Contributors</option>
                    <option value="50">Top 50</option>
                    <option value="100">Top 100</option>
                    <option value="200">Top 200</option>
                </select>
            </div>
        </div>

        <div class="export-buttons">
            <button class="export-btn export-data-btn" onclick="exportContributorData()">
                <i class="fas fa-download"></i>
                Export Data
            </button>
            <div class="export-status" id="exportStatus"></div>
        </div>
    </section>

    <!-- Export Button -->
    <div style="text-align: center;">
        <button class="export-btn" onclick="exportCharts()">
            <i class="fas fa-download"></i>
            Export Dashboard
        </button>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-social">
            <p>Connect with us</p>
            <div class="social-links">
                <a href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                <a href="#" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fa-brands fa-linkedin-in"></i></a>
                <a href="#" aria-label="GitHub"><i class="fa-brands fa-github"></i></a>
                <a href="#" aria-label="Twitter"><i class="fa-brands fa-x-twitter"></i></a>
            </div>
        </div>
        <p>¬© 2026 Community Hall of Fame</p>
        <p>
            Built with ‚ù§Ô∏è by the Open Source Community ¬∑
            <a href="https://github.com/Jayanta2004" target="_blank">GitHub</a>
        </p>
    </footer>

    <!-- Scripts -->
    <script>
        // Background animation (same as index.html)
        document.addEventListener("DOMContentLoaded", function () {
            const coords = { x: 0, y: 0 };
            const circles = document.querySelectorAll(".circle");

            circles.forEach(function (circle) {
                circle.x = 0;
                circle.y = 0;
            });

            window.addEventListener("mousemove", function (e) {
                coords.x = e.pageX;
                coords.y = e.pageY - window.scrollY;
            });

            function animateCircles() {
                let x = coords.x;
                let y = coords.y;
                circles.forEach(function (circle, index) {
                    circle.style.left = `${x - 12}px`;
                    circle.style.top = `${y - 12}px`;
                    circle.style.transform = `scale(${(circles.length - index) / circles.length})`;
                    const nextCircle = circles[index + 1] || circles[0];
                    circle.x = x;
                    circle.y = y;
                    x += (nextCircle.x - x) * 0.3;
                    y += (nextCircle.y - y) * 0.3;
                });

                requestAnimationFrame(animateCircles);
            }

            animateCircles();
        });
    </script>

    <!-- Theme Toggle -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('themeToggle');
            const body = document.body;

            function setTheme(theme) {
                body.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                themeToggle.textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
            }

            function toggleTheme() {
                const currentTheme = body.getAttribute('data-theme') || 'dark';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                setTheme(newTheme);
            }

            const savedTheme = localStorage.getItem('theme') || 'dark';
            setTheme(savedTheme);

            themeToggle.addEventListener('click', toggleTheme);
        });
    </script>

    <!-- Mobile Menu -->
    <script>
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            hamburger.classList.toggle('active');
        });
    </script>

    <!-- Statistics Dashboard Script -->
    <script>
        // Sample data - in a real implementation, this would come from an API or database
        const contributorData = {
            total: 0,
            developers: 0,
            contributors: 0,
            maintainers: 0,
            growth: [
                { month: 'Jan 2024', count: 45 },
                { month: 'Feb 2024', count: 52 },
                { month: 'Mar 2024', count: 61 },
                { month: 'Apr 2024', count: 73 },
                { month: 'May 2024', count: 89 },
                { month: 'Jun 2024', count: 104 },
                { month: 'Jul 2024', count: 118 },
                { month: 'Aug 2024', count: 135 },
                { month: 'Sep 2024', count: 152 },
                { month: 'Oct 2024', count: 168 },
                { month: 'Nov 2024', count: 187 },
                { month: 'Dec 2024', count: 203 }
            ],
            geographic: {
                'India': 85,
                'United States': 42,
                'United Kingdom': 18,
                'Germany': 15,
                'Canada': 12,
                'Australia': 8,
                'Brazil': 6,
                'France': 5,
                'Others': 12
            },
            monthlyActivity: [
                { month: 'Jan', contributions: 23 },
                { month: 'Feb', contributions: 31 },
                { month: 'Mar', contributions: 28 },
                { month: 'Apr', contributions: 35 },
                { month: 'May', contributions: 42 },
                { month: 'Jun', contributions: 38 },
                { month: 'Jul', contributions: 45 },
                { month: 'Aug', contributions: 39 },
                { month: 'Sep', contributions: 47 },
                { month: 'Oct', contributions: 41 },
                { month: 'Nov', contributions: 52 },
                { month: 'Dec', contributions: 48 }
            ]
        };

        // Chart instances
        let roleChart, growthChart, activityChart, geographicChart;

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Simulate loading contributor data from the main page
            loadContributorData();
            initializeCharts();
            setupControls();
        });

        function loadContributorData() {
            // Fetch contributor data from index.html
            fetch('index.html')
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');

                    // Find all contributor cards
                    const cards = doc.querySelectorAll('.card');
                    let developers = 0;
                    let contributors = 0;
                    let maintainers = 0;
                    const roles = {};

                    cards.forEach(card => {
                        const roleElement = card.querySelector('.role');
                        if (roleElement) {
                            const role = roleElement.textContent.trim().toLowerCase();

                            // Count different role types
                            if (role.includes('developer') || role.includes('frontend') || role.includes('backend') ||
                                role.includes('full stack') || role.includes('software engineer')) {
                                developers++;
                            } else if (role.includes('maintainer') || role.includes('admin') || role.includes('owner')) {
                                maintainers++;
                            } else if (role.includes('contributor') || role.includes('open source')) {
                                contributors++;
                            } else {
                                // Default to contributor for other roles
                                contributors++;
                            }

                            // Count all roles for distribution
                            const displayRole = roleElement.textContent.trim();
                            roles[displayRole] = (roles[displayRole] || 0) + 1;
                        }
                    });

                    const total = developers + contributors + maintainers;

                    // Update summary cards
                    document.getElementById('totalContributors').textContent = total;
                    document.getElementById('totalDevelopers').textContent = developers;
                    document.getElementById('totalContributorsOnly').textContent = contributors;
                    document.getElementById('totalMaintainers').textContent = maintainers;

                    // Update chart data
                    contributorData.total = total;
                    contributorData.developers = developers;
                    contributorData.contributors = contributors;
                    contributorData.maintainers = maintainers;

                    // Update role distribution chart with actual data
                    if (roleChart) {
                        roleChart.data.labels = Object.keys(roles);
                        roleChart.data.datasets[0].data = Object.values(roles);
                        roleChart.update();
                    }
                })
                .catch(error => {
                    console.error('Error loading contributor data:', error);
                    // Fallback to sample data
                    document.getElementById('totalContributors').textContent = contributorData.total;
                    document.getElementById('totalDevelopers').textContent = contributorData.developers;
                    document.getElementById('totalContributorsOnly').textContent = contributorData.contributors;
                    document.getElementById('totalMaintainers').textContent = contributorData.maintainers;
                });
        }

        function initializeCharts() {
            // Role Distribution Chart
            const roleCtx = document.getElementById('roleChart').getContext('2d');
            roleChart = new Chart(roleCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Developers', 'Contributors', 'Maintainers'],
                    datasets: [{
                        data: [contributorData.developers, contributorData.contributors, contributorData.maintainers],
                        backgroundColor: [
                            'rgba(56, 189, 248, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)'
                        ],
                        borderColor: [
                            'rgba(56, 189, 248, 1)',
                            'rgba(139, 92, 246, 1)',
                            'rgba(16, 185, 129, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-primary')
                            }
                        }
                    }
                }
            });

            // Growth Timeline Chart
            const growthCtx = document.getElementById('growthChart').getContext('2d');
            growthChart = new Chart(growthCtx, {
                type: 'line',
                data: {
                    labels: contributorData.growth.map(item => item.month),
                    datasets: [{
                        label: 'Contributors',
                        data: contributorData.growth.map(item => item.count),
                        borderColor: 'rgba(56, 189, 248, 1)',
                        backgroundColor: 'rgba(56, 189, 248, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: getComputedStyle(document.body).getPropertyValue('--border-primary')
                            },
                            ticks: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
                            }
                        },
                        x: {
                            grid: {
                                color: getComputedStyle(document.body).getPropertyValue('--border-primary')
                            },
                            ticks: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-primary')
                            }
                        }
                    }
                }
            });

            // Monthly Activity Chart
            const activityCtx = document.getElementById('activityChart').getContext('2d');
            activityChart = new Chart(activityCtx, {
                type: 'bar',
                data: {
                    labels: contributorData.monthlyActivity.map(item => item.month),
                    datasets: [{
                        label: 'Contributions',
                        data: contributorData.monthlyActivity.map(item => item.contributions),
                        backgroundColor: 'rgba(139, 92, 246, 0.8)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 1,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: getComputedStyle(document.body).getPropertyValue('--border-primary')
                            },
                            ticks: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
                            }
                        },
                        x: {
                            grid: {
                                color: getComputedStyle(document.body).getPropertyValue('--border-primary')
                            },
                            ticks: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-primary')
                            }
                        }
                    }
                }
            });

            // Geographic Distribution Chart
            const geographicCtx = document.getElementById('geographicChart').getContext('2d');
            geographicChart = new Chart(geographicCtx, {
                type: 'radar',
                data: {
                    labels: Object.keys(contributorData.geographic),
                    datasets: [{
                        label: 'Contributors by Country',
                        data: Object.values(contributorData.geographic),
                        backgroundColor: 'rgba(16, 185, 129, 0.2)',
                        borderColor: 'rgba(16, 185, 129, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(16, 185, 129, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(16, 185, 129, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            grid: {
                                color: getComputedStyle(document.body).getPropertyValue('--border-primary')
                            },
                            angleLines: {
                                color: getComputedStyle(document.body).getPropertyValue('--border-primary')
                            },
                            pointLabels: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
                            },
                            ticks: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: getComputedStyle(document.body).getPropertyValue('--text-primary')
                            }
                        }
                    }
                }
            });
        }

        function setupControls() {
            // Time range filter
            document.getElementById('timeRange').addEventListener('change', function() {
                updateCharts(this.value);
            });

            // Chart type filter
            document.getElementById('chartType').addEventListener('change', function() {
                updateChartTypes(this.value);
            });

            // Role filter
            document.getElementById('roleFilter').addEventListener('change', function() {
                filterByRole(this.value);
            });
        }

        function updateCharts(timeRange) {
            // Filter data based on time range
            let filteredGrowth = contributorData.growth;
            let filteredActivity = contributorData.monthlyActivity;

            switch(timeRange) {
                case 'year':
                    filteredGrowth = contributorData.growth.slice(-12);
                    filteredActivity = contributorData.monthlyActivity.slice(-12);
                    break;
                case 'month':
                    filteredGrowth = contributorData.growth.slice(-1);
                    filteredActivity = contributorData.monthlyActivity.slice(-1);
                    break;
                case 'week':
                    // For demo purposes, show last 4 weeks
                    filteredGrowth = contributorData.growth.slice(-1);
                    filteredActivity = contributorData.monthlyActivity.slice(-1);
                    break;
            }

            // Update growth chart
            growthChart.data.labels = filteredGrowth.map(item => item.month);
            growthChart.data.datasets[0].data = filteredGrowth.map(item => item.count);
            growthChart.update();

            // Update activity chart
            activityChart.data.labels = filteredActivity.map(item => item.month);
            activityChart.data.datasets[0].data = filteredActivity.map(item => item.contributions);
            activityChart.update();
        }

        function updateChartTypes(chartType) {
            // Update chart types dynamically
            roleChart.config.type = chartType === 'doughnut' ? 'doughnut' : chartType;
            roleChart.update();

            growthChart.config.type = chartType === 'line' ? 'line' : chartType;
            growthChart.update();

            activityChart.config.type = chartType === 'bar' ? 'bar' : chartType;
            activityChart.update();

            geographicChart.config.type = chartType === 'radar' ? 'radar' : chartType;
            geographicChart.update();
        }

        function filterByRole(role) {
            // Filter charts based on selected role
            // This would require more complex data structure in a real implementation
            console.log('Filtering by role:', role);
        }

        async function exportContributorData() {
            const statusElement = document.getElementById('exportStatus');
            const format = document.getElementById('exportFormat').value;
            const roleFilter = document.getElementById('exportRoleFilter').value;
            const limit = document.getElementById('exportLimit').value;

            try {
                statusElement.textContent = 'Loading contributor data...';
                statusElement.className = 'export-status loading';

                // Fetch contributor data
                const contributors = await fetchContributorData();

                // Apply filters
                let filteredData = contributors;
                if (roleFilter !== 'all') {
                    filteredData = contributors.filter(contributor => {
                        const role = contributor.role.toLowerCase();
                        return role.includes(roleFilter);
                    });
                }

                // Apply limit
                if (limit !== 'all') {
                    filteredData = filteredData.slice(0, parseInt(limit));
                }

                // Export based on format
                switch (format) {
                    case 'json':
                        exportAsJSON(filteredData);
                        break;
                    case 'csv':
                        exportAsCSV(filteredData);
                        break;
                    case 'pdf':
                        exportAsPDF(filteredData);
                        break;
                }

                statusElement.textContent = `Successfully exported ${filteredData.length} contributors!`;
                statusElement.className = 'export-status success';

                // Clear status after 3 seconds
                setTimeout(() => {
                    statusElement.textContent = '';
                    statusElement.className = 'export-status';
                }, 3000);

            } catch (error) {
                console.error('Export failed:', error);
                statusElement.textContent = 'Export failed. Please try again.';
                statusElement.className = 'export-status error';
            }
        }

        async function fetchContributorData() {
            return new Promise((resolve, reject) => {
                fetch('index.html')
                    .then(response => response.text())
                    .then(html => {
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        const cards = doc.querySelectorAll('.card');
                        const contributors = [];

                        cards.forEach(card => {
                            const imgElement = card.querySelector('.card-img');
                            const nameElement = card.querySelector('h2');
                            const roleElement = card.querySelector('.role');
                            const descriptionElement = card.querySelector('p');
                            const linkElement = card.querySelector('.card-btn');

                            if (nameElement && roleElement) {
                                contributors.push({
                                    name: nameElement.textContent.trim(),
                                    role: roleElement.textContent.trim(),
                                    description: descriptionElement ? descriptionElement.textContent.trim() : '',
                                    githubUrl: linkElement ? linkElement.href : '',
                                    imageUrl: imgElement ? imgElement.src : ''
                                });
                            }
                        });

                        resolve(contributors);
                    })
                    .catch(reject);
            });
        }

        function exportAsJSON(data) {
            const jsonData = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            const link = document.createElement('a');
            link.href = url;
            link.download = `contributors-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            URL.revokeObjectURL(url);
        }

        function exportAsCSV(data) {
            if (data.length === 0) {
                alert('No data to export');
                return;
            }

            // CSV headers
            const headers = ['Name', 'Role', 'Description', 'GitHub URL', 'Image URL'];
            let csvContent = headers.join(',') + '\n';

            // Add data rows
            data.forEach(contributor => {
                const row = [
                    `"${contributor.name.replace(/"/g, '""')}"`,
                    `"${contributor.role.replace(/"/g, '""')}"`,
                    `"${contributor.description.replace(/"/g, '""')}"`,
                    `"${contributor.githubUrl}"`,
                    `"${contributor.imageUrl}"`
                ];
                csvContent += row.join(',') + '\n';
            });

            // Create and download CSV file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);

            const link = document.createElement('a');
            link.href = url;
            link.download = `contributors-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            URL.revokeObjectURL(url);
        }

        function exportAsPDF(data) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Add title
            doc.setFontSize(20);
            doc.text('Contributor Statistics Report', 20, 30);

            // Add date
            doc.setFontSize(12);
            doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 20, 45);

            // Add summary
            doc.text(`Total Contributors: ${data.length}`, 20, 60);

            // Add table headers
            let yPosition = 80;
            doc.setFontSize(10);
            doc.text('Name', 20, yPosition);
            doc.text('Role', 80, yPosition);
            doc.text('GitHub', 130, yPosition);

            yPosition += 10;

            // Add data rows (limit to fit on page)
            const maxRows = Math.min(data.length, 25); // Limit for PDF page
            for (let i = 0; i < maxRows; i++) {
                const contributor = data[i];
                const name = contributor.name.length > 15 ? contributor.name.substring(0, 15) + '...' : contributor.name;
                const role = contributor.role.length > 12 ? contributor.role.substring(0, 12) + '...' : contributor.role;

                doc.text(name, 20, yPosition);
                doc.text(role, 80, yPosition);
                doc.text(contributor.githubUrl ? 'Link' : '', 130, yPosition);

                yPosition += 8;

                // Add new page if needed
                if (yPosition > 270 && i < maxRows - 1) {
                    doc.addPage();
                    yPosition = 30;
                }
            }

            // Save the PDF
            doc.save(`contributors-${new Date().toISOString().split('T')[0]}.pdf`);
        }

        function exportCharts() {
            // Export dashboard as image
            html2canvas(document.querySelector('.charts-grid')).then(canvas => {
                const link = document.createElement('a');
                link.download = 'contributor-statistics.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // Load html2canvas for export functionality
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
        document.head.appendChild(script);
    </script>
</body>
</html></content>
