<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL-Lite-JS | Relational Database Engine</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
    <div id="db-root">
        
        <aside class="sidebar">
            <div class="brand">
                <i class="ri-database-2-fill"></i>
                <div class="brand-text">
                    <h1>SQL-Lite</h1>
                    <span class="badge">v1.0 ENGINE</span>
                </div>
            </div>

            <div class="connection-status connected">
                <i class="ri-checkbox-circle-fill"></i>
                <span>Virtual Disk Mounted</span>
            </div>

            <div class="explorer-section">
                <div class="section-header">
                    <span>TABLES</span>
                    <button id="btn-create-table" title="New Table"><i class="ri-add-line"></i></button>
                </div>
                <div id="table-list" class="tree-view">
                    <div class="empty-tree">No tables found</div>
                </div>
            </div>

            <div class="explorer-section">
                <div class="section-header">
                    <span>INDEXES (B-Tree)</span>
                </div>
                <div id="index-list" class="tree-view">
                    </div>
            </div>

            <div class="storage-info">
                <div class="storage-header">
                    <span>Storage Usage</span>
                    <span id="storage-val">0 KB</span>
                </div>
                <div class="progress-bar">
                    <div class="fill" id="storage-fill" style="width: 0%"></div>
                </div>
                <button id="btn-nuke" class="btn-danger-outline">Format Disk</button>
            </div>
        </aside>

        <main class="workspace">
            
            <header class="toolbar">
                <div class="toolbar-left">
                    <button class="tool-btn active" id="tab-query"><i class="ri-code-s-slash-line"></i> Query Editor</button>
                    <button class="tool-btn" id="tab-structure"><i class="ri-table-line"></i> Structure</button>
                </div>
                <div class="toolbar-right">
                    <button class="action-btn" id="btn-import"><i class="ri-upload-line"></i> Import CSV</button>
                    <button class="action-btn" id="btn-export"><i class="ri-download-line"></i> Export JSON</button>
                    <button class="run-btn" id="btn-run">
                        <i class="ri-play-fill"></i> Execute (Ctrl+Enter)
                    </button>
                </div>
            </header>

            <section class="editor-container">
                <div class="gutter" id="line-numbers">
                    <div>1</div>
                </div>
                <div class="code-wrapper">
                    <pre id="syntax-layer"><code id="code-highlight" class="language-sql"></code></pre>
                    <textarea id="sql-input" spellcheck="false" placeholder="-- Enter SQL Query here...
SELECT * FROM users WHERE age > 25;"></textarea>
                </div>
            </section>

            <div class="resizer" id="drag-handle"></div>

            <section class="results-container" style="height: 400px;">
                <div class="results-tabs">
                    <button class="res-tab active" data-target="grid">Result Grid</button>
                    <button class="res-tab" data-target="logs">Execution Plan</button>
                    <button class="res-tab" data-target="raw">Raw Output</button>
                    
                    <div class="query-time" id="query-timer">Time: 0ms</div>
                </div>

                <div class="results-body">
                    <div id="view-grid" class="view-panel active">
                        <div class="table-wrapper">
                            <table id="result-table">
                                <thead>
                                    <tr><th>Waiting for query...</th></tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="pagination" id="grid-pagination">
                            <span>Rows: 0</span>
                        </div>
                    </div>

                    <div id="view-logs" class="view-panel">
                        <div class="console-output" id="console-logs">
                            <div class="log-entry system">Database Engine Initialized.</div>
                            <div class="log-entry system">Disk Driver: localStorage (Block Size: 4KB)</div>
                        </div>
                    </div>

                    <div id="view-raw" class="view-panel">
                        <pre id="json-output"></pre>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <div class="modal-overlay hidden" id="modal-create">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Create New Table</h3>
                <i class="ri-close-line close-modal"></i>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Table Name</label>
                    <input type="text" id="new-table-name" placeholder="e.g., users">
                </div>
                <div class="cols-header">
                    <label>Columns</label>
                    <button class="btn-sm" id="btn-add-col"><i class="ri-add-line"></i> Add</button>
                </div>
                <div class="cols-list" id="cols-container">
                    <div class="col-row">
                        <input type="text" placeholder="id" class="col-name" value="id">
                        <select class="col-type">
                            <option value="INT">INT</option>
                            <option value="TEXT">TEXT</option>
                            <option value="BOOL">BOOL</option>
                        </select>
                        <label class="checkbox-label"><input type="checkbox" checked disabled> PK</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary close-modal">Cancel</button>
                <button class="btn-primary" id="btn-submit-table">Create</button>
            </div>
        </div>
    </div>

    <script src="storage.js"></script> <script src="btree.js"></script>   <script src="parser.js"></script>  <script src="engine.js"></script>  <script src="script.js"></script>  </body>
</html>