/* Piano Layout */
.piano {
    display: flex;
    justify-content: center;
    position: relative;
    user-select: none;
    perspective: 1000px;
    /* Base width: 15 white keys * 64px = 960px */
    width: 960px;
    height: 300px;
    margin: 0 auto;
    /* Center horizontally */
}

/* White Keys */
.key {
    position: relative;
    cursor: pointer;
    transition: all 0.1s ease;
    border-radius: 0 0 6px 6px;
}

.key.white {
    width: 64px;
    height: 300px;
    background: linear-gradient(to bottom, #ffffff 0%, #f0f0f0 100%);
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow:
        0 4px 5px rgba(0, 0, 0, 0.1),
        inset 0 -15px 10px rgba(0, 0, 0, 0.05),
        inset 0 -2px 5px rgba(0, 0, 0, 0.1);
    z-index: 1;
}

.key.white:hover {
    background: linear-gradient(to bottom, #fcfcfc 0%, #f5f5f5 100%);
}

.key.white:active,
.key.white.active {
    height: 295px;
    /* Visual press down */
    margin-bottom: 5px;
    /* Keep alignment at top */
    background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
    box-shadow:
        0 2px 3px rgba(0, 0, 0, 0.2),
        inset 0 -5px 10px rgba(0, 0, 0, 0.1);
    border-bottom: 4px solid #00d2ff;
    /* Accent pop */
}

/* Black Keys */
.key.black {
    width: 44px;
    height: 190px;
    background: linear-gradient(180deg, #333 0%, #000 100%);
    border-width: 1px 2px 6px 2px;
    border-style: solid;
    border-color: #111 #111 #000 #111;
    border-radius: 0 0 4px 4px;
    box-shadow:
        0 8px 10px rgba(0, 0, 0, 0.5),
        inset 0 1px 2px rgba(255, 255, 255, 0.2);
    position: absolute;
    z-index: 10;
}

.key.black:hover {
    background: linear-gradient(180deg, #444 0%, #111 100%);
}

.key.black:active,
.key.black.active {
    height: 186px;
    background: linear-gradient(180deg, #222 0%, #000 100%);
    box-shadow:
        0 4px 5px rgba(0, 0, 0, 0.5),
        inset 0 1px 2px rgba(255, 255, 255, 0.1);
    border-bottom: 4px solid #00d2ff;
    /* Accent pop */
    border-width: 1px 2px 4px 2px;
}

/* Black Key Positioning - Precise Layout */
/* Octave 4 (Base) */
.key.black[data-note="Db4"] {
    left: 45px;
}

.key.black[data-note="Eb4"] {
    left: 109px;
}

.key.black[data-note="Gb4"] {
    left: 237px;
}

.key.black[data-note="Ab4"] {
    left: 301px;
}

.key.black[data-note="Bb4"] {
    left: 365px;
}

/* Octave 5 (Offset by 7 white keys * 64px = 448px) */
/* 45 + 448 = 493 */
.key.black[data-note="Db5"] {
    left: 493px;
}

/* 109 + 448 = 557 */
.key.black[data-note="Eb5"] {
    left: 557px;
}

/* 237 + 448 = 685 */
.key.black[data-note="Gb5"] {
    left: 685px;
}

/* 301 + 448 = 749 */
.key.black[data-note="Ab5"] {
    left: 749px;
}

/* 365 + 448 = 813 */
.key.black[data-note="Bb5"] {
    left: 813px;
}


/* Key Labels */
.key-label {
    position: absolute;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.9rem;
    font-weight: 700;
    pointer-events: none;
    color: rgba(0, 0, 0, 0.3);
}

.key.black .key-label {
    color: rgba(255, 255, 255, 0.3);
    bottom: 15px;
    font-size: 0.8rem;
}

/* Note Name Display */
.note-name {
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.75rem;
    font-weight: 600;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
}

.key:hover .note-name,
.key.active .note-name {
    opacity: 0.6;
}

/* Active Glow Effects */
.key.white.active {
    background: linear-gradient(to bottom, #fff 0%, #d4f4ff 100%);
}

.key.black.active {
    background: linear-gradient(180deg, #222 0%, #002233 100%);
}

/* Playing Animation (Programmatic usage) */
@keyframes keyPress {
    0% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(4px);
    }

    100% {
        transform: translateY(0);
    }
}

/* Responsive Piano - Using pure scaling */
/* Container width is 960px */

@media (max-width: 1000px) {
    .piano {
        transform: scale(0.9);
        transform-origin: center top;
    }
}

@media (max-width: 850px) {
    .piano {
        transform: scale(0.75);
        transform-origin: center top;
        height: 225px;
        /* 300 * 0.75 */
    }
}

@media (max-width: 700px) {
    .piano {
        transform: scale(0.6);
        transform-origin: center top;
        height: 180px;
        /* 300 * 0.6 */
    }
}

@media (max-width: 550px) {
    .piano {
        transform: scale(0.45);
        /* Fit small screens */
        transform-origin: center top;
        height: 135px;
    }
}