<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogicFlow | Visual Scripting Environment</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>

<body>
    <div id="app-root">

        <header class="toolbar">
            <div class="brand">
                <i class="ri-node-tree"></i> LogicFlow <span class="version">v1.0</span>
            </div>

            <div class="toolbar-center">
                <div class="tool-group">
                    <button id="btn-run" class="btn-primary" title="Execute Graph (F5)">
                        <i class="ri-play-fill"></i> Run Flow
                    </button>
                    <button id="btn-stop" class="btn-danger" disabled title="Stop Execution">
                        <i class="ri-stop-fill"></i>
                    </button>
                </div>
                <div class="divider"></div>
                <div class="tool-group">
                    <button id="btn-clear" title="Clear Canvas">
                        <i class="ri-delete-bin-line"></i>
                    </button>
                    <button id="btn-center" title="Reset View">
                        <i class="ri-focus-3-line"></i>
                    </button>
                </div>
            </div>

            <div class="toolbar-right">
                <button id="btn-export" class="btn-secondary">
                    <i class="ri-download-line"></i> JSON
                </button>
                <button id="btn-settings">
                    <i class="ri-settings-3-line"></i>
                </button>
            </div>
        </header>

        <div class="workspace">

            <aside class="sidebar" id="node-library">
                <div class="sidebar-header">
                    <span>Library</span>
                    <i class="ri-search-line"></i>
                </div>
                <div class="search-box">
                    <input type="text" id="node-search" placeholder="Search nodes...">
                </div>

                <div class="library-content">

                    <div class="lib-category">
                        <div class="cat-header">
                            <i class="ri-flag-fill cat-icon event"></i> Events
                        </div>
                        <div class="cat-items">
                            <div class="node-preview" draggable="true" data-type="EventStart">
                                <span class="node-name">Event Begin</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="EventTick">
                                <span class="node-name">Event Tick</span>
                            </div>
                        </div>
                    </div>

                    <div class="lib-category">
                        <div class="cat-header">
                            <i class="ri-flow-chart cat-icon logic"></i> Logic
                        </div>
                        <div class="cat-items">
                            <div class="node-preview" draggable="true" data-type="LogicIf">
                                <span class="node-name">Branch (If)</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="LogicCompare">
                                <span class="node-name">Compare (==)</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="LogicAnd">
                                <span class="node-name">AND Gate</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="LogicOr">
                                <span class="node-name">OR Gate</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="LogicNot">
                                <span class="node-name">NOT Gate</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="LogicGreater">
                                <span class="node-name">Greater Than (&gt;)</span>
                            </div>
                        </div>
                    </div>

                    <div class="lib-category">
                        <div class="cat-header">
                            <i class="ri-calculator-fill cat-icon math"></i> Math
                        </div>
                        <div class="cat-items">
                            <div class="node-preview" draggable="true" data-type="MathAdd">
                                <span class="node-name">Add (+)</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathSub">
                                <span class="node-name">Subtract (-)</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathMult">
                                <span class="node-name">Multiply (*)</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathDiv">
                                <span class="node-name">Divide (/)</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathPow">
                                <span class="node-name">Power (^)</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathSin">
                                <span class="node-name">Sine</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathCos">
                                <span class="node-name">Cosine</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathClamp">
                                <span class="node-name">Clamp</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="MathRandom">
                                <span class="node-name">Random Float</span>
                            </div>
                        </div>
                    </div>

                    <div class="lib-category">
                        <div class="cat-header">
                            <i class="ri-database-2-fill cat-icon data"></i> Data / IO
                        </div>
                        <div class="cat-items">
                            <div class="node-preview" draggable="true" data-type="VarString">
                                <span class="node-name">String Literal</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="VarNumber">
                                <span class="node-name">Number Literal</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="VarBool">
                                <span class="node-name">Boolean</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="StringConcat">
                                <span class="node-name">Concat Strings</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="ToString">
                                <span class="node-name">To String</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="ToNumber">
                                <span class="node-name">To Number</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="PrintLog">
                                <span class="node-name">Print Console</span>
                            </div>
                        </div>
                    </div>

                    <div class="lib-category">
                        <div class="cat-header">
                            <i class="ri-git-branch-line cat-icon flow"></i> Flow Control
                        </div>
                        <div class="cat-items">
                            <div class="node-preview" draggable="true" data-type="FlowDelay">
                                <span class="node-name">Delay</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="FlowSequence">
                                <span class="node-name">Sequence</span>
                            </div>
                            <div class="node-preview" draggable="true" data-type="FlowForLoop">
                                <span class="node-name">For Loop</span>
                            </div>
                        </div>
                    </div>

                </div>
            </aside>

            <main class="canvas-wrapper" id="canvas-container">

                <div class="grid-background" id="grid-bg"></div>

                <div class="world-container" id="world">

                    <svg class="connections-layer" id="connections-svg">
                        <defs>
                            <marker id="arrow-flow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto"
                                markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#ffffff" />
                            </marker>
                        </defs>
                    </svg>

                    <div class="nodes-layer" id="nodes-container">
                    </div>

                    <svg class="drag-line-layer" id="drag-svg">
                        <path id="drag-wire" class="wire-drag" d="" />
                    </svg>

                </div>

                <div class="canvas-controls">
                    <div class="zoom-display" id="zoom-level">100%</div>
                    <button id="zoom-in"><i class="ri-add-line"></i></button>
                    <button id="zoom-out"><i class="ri-subtract-line"></i></button>
                </div>

            </main>

            <aside class="sidebar right" id="properties-panel">

                <div class="panel-section">
                    <div class="sidebar-header">
                        <span>Inspector</span>
                        <i class="ri-equalizer-line"></i>
                    </div>
                    <div class="inspector-content" id="inspector-content">
                        <div class="empty-state">Select a node to edit</div>
                    </div>
                </div>

                <div class="panel-section flex-grow">
                    <div class="sidebar-header">
                        <span>Console Output</span>
                        <i class="ri-terminal-box-line"></i>
                        <i class="ri-delete-bin-7-line action-icon" id="btn-clear-console"></i>
                    </div>
                    <div class="console-output" id="console-log">
                        <div class="log-entry system">LogicFlow Engine Ready.</div>
                    </div>
                </div>

            </aside>

        </div>
    </div>

    <div id="context-menu" class="context-menu hidden">
        <div class="menu-item" data-action="delete">Delete Node</div>
        <div class="menu-item" data-action="duplicate">Duplicate</div>
        <div class="menu-divider"></div>
        <div class="menu-item" data-action="disconnect">Disconnect All</div>
    </div>

    <script src="script.js"></script>
</body>

</html>