/* --- CORE VARIABLES --- */
:root {
    --primary: #6200ee;
    --accent: #03dac6;
    --bg-color: #f5f5f5;
    --surface-color: #ffffff;
    --text-color: #000000;
    --shade-color: rgba(0,0,0,0.5);
    --border-radius: 18px;
    --icon-size: 50px;
    --status-bar-height: 28px;
    --transition-speed: 0.3s;
}

[data-theme="dark"] {
    --bg-color: #121212;
    --surface-color: #1e1e1e;
    --text-color: #ffffff;
    --shade-color: rgba(255,255,255,0.1);
}

/* --- GLOBAL RESET --- */
* { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
body { margin: 0; padding: 0; font-family: 'Roboto', sans-serif; background: #222; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }

/* --- DEVICE CHASSIS --- */
#device {
    width: 100%; height: 100%; max-width: 400px; max-height: 850px;
    background: var(--bg-color); position: relative; overflow: hidden;
    display: flex; flex-direction: column; color: var(--text-color);
    box-shadow: 0 0 50px rgba(0,0,0,0.5);
}

@media (min-width: 450px) {
    #device { border-radius: 30px; border: 8px solid #333; height: 800px; }
}

/* --- LAYERS --- */
.layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transition: transform var(--transition-speed), opacity var(--transition-speed); display: none; flex-direction: column; }
.layer.active { display: flex; opacity: 1; z-index: 10; }
.layer.hidden { display: flex; opacity: 0; pointer-events: none; z-index: 0; }

/* --- STATUS BAR --- */
#status-bar { height: var(--status-bar-height); display: flex; justify-content: space-between; align-items: center; padding: 0 15px; font-size: 12px; font-weight: bold; z-index: 1000; cursor: pointer; }
.status-right { display: flex; gap: 8px; }

/* --- NOTIFICATION SHADE --- */
#notification-shade { position: absolute; top: -100%; left: 0; width: 100%; height: 100%; z-index: 999; transition: top 0.3s ease; display: flex; flex-direction: column; }
#notification-shade.open { top: 0; }
.shade-panel { background: var(--surface-color); padding: 40px 20px 20px; border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 2; }
.shade-overlay { flex: 1; background: rgba(0,0,0,0.6); backdrop-filter: blur(2px); }
.notif-item { padding: 10px; border-bottom: 1px solid var(--shade-color); display: flex; justify-content: space-between; }

/* --- BOOT & LOCK --- */
#boot-screen { background: #000; color: #fff; justify-content: center; align-items: center; z-index: 2000; }
.logo-anim { font-size: 2rem; animation: pulse 1.5s infinite; }
@keyframes pulse { 0% { opacity: 0.5; transform: scale(0.9); } 50% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.5; transform: scale(0.9); } }

#lock-screen { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; justify-content: center; align-items: center; z-index: 100; cursor: pointer; }
.lock-clock { font-size: 4rem; font-weight: 200; }
.swipe-hint { position: absolute; bottom: 50px; opacity: 0.7; animation: bounce 2s infinite; }
@keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }

/* --- HOME & APP UI --- */
#home-screen { padding-top: var(--status-bar-height); }
.app-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px; align-content: start; }
.app-icon-wrapper { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.1s; }
.app-icon-wrapper:active { transform: scale(0.9); }
.app-icon { width: var(--icon-size); height: var(--icon-size); background: var(--surface-color); border-radius: 12px; display: flex; justify-content: center; align-items: center; font-size: 24px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.app-name { font-size: 11px; margin-top: 5px; text-align: center; }

#app-drawer { background: var(--surface-color); transform: translateY(100%); padding: 40px 20px; z-index: 50; }
#app-drawer.open { transform: translateY(0); }
.search-bar { width: 100%; padding: 10px; background: var(--bg-color); border: none; border-radius: 8px; margin-bottom: 20px; color: var(--text-color); }

/* --- RECENTS --- */
#recents-screen { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.85); z-index: 90; padding: 40px; display: none; overflow-x: auto; flex-direction: row; gap: 20px; align-items: center; }
#recents-screen.active { display: flex; }
.recent-card { min-width: 200px; height: 350px; background: var(--surface-color); border-radius: 15px; position: relative; padding: 10px; display: flex; flex-direction: column; transform: scale(0.9); transition: 0.2s; }
.recent-card:active { transform: scale(0.95); }
.close-app-btn { position: absolute; top: -10px; right: -10px; background: red; color: white; border-radius: 50%; width: 25px; height: 25px; border: none; cursor: pointer; z-index: 2; }

/* --- APP WINDOW --- */
#app-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 60; }
.app-window { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color); transform: scale(0.8); opacity: 0; pointer-events: none; transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); display: flex; flex-direction: column; padding-top: var(--status-bar-height); overflow: hidden; }
.app-window.open { transform: scale(1); opacity: 1; pointer-events: auto; }
.app-header { padding: 10px 15px; font-weight: bold; border-bottom: 1px solid var(--shade-color); display: flex; align-items: center; gap: 10px; background: var(--surface-color); }
.app-content { flex: 1; padding: 15px; overflow-y: auto; position: relative; }

/* --- GESTURE BAR --- */
#gesture-bar { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); width: 40%; height: 5px; background: #999; border-radius: 3px; z-index: 2000; opacity: 0.5; }

/* --- UI ELEMENTS --- */
.os-btn { background: var(--primary); color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; }
.calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; height: 100%; }
.calc-btn { background: var(--surface-color); border: none; border-radius: 50%; font-size: 1.2rem; color: var(--text-color); box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; }
.calc-display { grid-column: span 4; background: var(--bg-color); text-align: right; font-size: 3rem; padding: 20px; border-radius: 10px; margin-bottom: 10px; }
.toggle-switch { width: 40px; height: 20px; background: #ccc; border-radius: 10px; position: relative; cursor: pointer; transition: 0.3s; }
.toggle-switch::after { content: ''; position: absolute; top: 2px; left: 2px; width: 16px; height: 16px; background: white; border-radius: 50%; transition: 0.3s; }
.toggle-switch.on { background: var(--primary); }
.toggle-switch.on::after { left: 22px; }